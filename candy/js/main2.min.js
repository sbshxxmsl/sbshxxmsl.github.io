window.onload=function(){for(var e=document.querySelectorAll(".gouwu2 .div4"),n=document.querySelectorAll(".gouwu2 .box-span2 span"),r=document.querySelectorAll(".gouwu2 .box1"),i=document.querySelectorAll(".gouwu2 .box2"),t=document.querySelectorAll(".gouwu2 input"),l=document.querySelectorAll(".gouwu2 .box3"),o=document.querySelectorAll(".gouwu3"),u=0;u<e.length;u++)e[u].index=u,l[u].style.height=o[u].clientHeight+"px",l[u].style.lineHeight=o[u].clientHeight+"px",e[u].onclick=function(){"完成"==e[this.index].innerHTML?(e[this.index].innerHTML="编辑",n[this.index].innerHTML=t[this.index].value,i[this.index].style.display="none",r[this.index].style.display="block",l[this.index].style.width="0",l[this.index].innerHTML=""):(e[this.index].innerHTML="完成",t[this.index].value=n[this.index].innerHTML,r[this.index].style.display="none",i[this.index].style.display="block",l[this.index].innerHTML="删除",l[this.index].style.width="20%")};for(var d=document.querySelectorAll(".gouwu2"),u=0;u<l.length;u++)l[u].index=u,l[u].onclick=function(){d[this.index].style.display="none"};d[d.length-1].style.marginBottom="3.5rem";for(var s=document.querySelectorAll(".gouwu2 .box2-span2"),c=document.querySelectorAll(".gouwu2 .box2-span1"),u=0;u<s.length;u++)s[u].index=u,s[u].onclick=function(){t[this.index].value=Number(t[this.index].value)+1,n[this.index].innerHTML=t[this.index].value},c[u].index=u,c[u].onclick=function(){"1"==t[this.index].value?t[this.index].value="1":t[this.index].value=Number(t[this.index].value)-1,n[this.index].innerHTML=t[this.index].value};var a=document.querySelectorAll(".gouwu .gouwu2 .div2"),h=document.querySelector(".Settlement .div2"),b=document.querySelector(".Total"),y=document.querySelectorAll(".box-span1"),x=document.querySelector(".Settlement .div44 a span");h.onclick=function(){var e=document.querySelectorAll(".div2 div"),r=h.querySelector("div");if("none"==r.style.border){for(var i=0;i<e.length;i++)e[i].style.background="none",e[i].style.border="1px solid #ccc";b.innerHTML="￥0.00",x.innerHTML="0"}else{for(var t=0;t<e.length;t++)e[t].style.background="url(../img/gouwu2.png) no-repeat",e[t].style.border="none",e[t].style.backgroundSize="cover";for(var l=0,t=0;t<y.length;t++){var o=y[t].innerHTML.substr(1,y[t].innerHTML.length-1),u=o*Number(n[t].innerHTML);l=Number(u)+l}var d=0;b.innerHTML="￥"+l+".00";for(var t=0;t<n.length;t++)d=Number(n[t].innerHTML)+d;x.innerHTML=d}};for(var u=0;u<a.length;u++)a[u].index=u,a[u].onclick=function(){var e=a[this.index].parentNode,n=e.querySelectorAll(".div2 div"),r=e.querySelector(".box-span1"),i=e.querySelector(".box-span2 span"),t=b.innerHTML.substr(1,b.innerHTML.length-1);if("none"===n[0].style.border){for(var l=0;l<n.length;l++)n[l].style.background="none",n[l].style.border="1px solid #ccc";var o=r.innerHTML.substr(1,r.innerHTML.length-1),u=Number(o)*Number(i.innerHTML);Number(t)-Number(u)<0?b.innerHTML="￥0.00":b.innerHTML="￥"+(Number(t)-Number(u))+".00",Number(x.innerHTML)-Number(i.innerHTML)<0?x.innerHTML="0":x.innerHTML=Number(x.innerHTML)-Number(i.innerHTML)}else{for(var l=0;l<n.length;l++)n[l].style.background="url(../img/gouwu2.png) no-repeat",n[l].style.border="none",n[l].style.backgroundSize="cover";var o=r.innerHTML.substr(1,r.innerHTML.length-1),u=Number(o)*Number(i.innerHTML);b.innerHTML="￥"+(Number(t)+Number(u))+".00",x.innerHTML=Number(i.innerHTML)+Number(x.innerHTML)}}};